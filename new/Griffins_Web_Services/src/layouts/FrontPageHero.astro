---
// src/layouts/FrontPageHero.astro
import Button from "@/components/Button/Button";
import ContentRenderer from "@/components/ContentRenderer/ContentRenderer.astro";
import Heading from "@/components/Heading";
import TestimonialCircleSection from "@/components/sections/TestimonialCircleSection.astro";
import { query } from "@/utils/query";

interface CTA {
  text: string;
  link: string;
}

export interface Props {
  title?: string;
  description?: string;
  primaryCTA?: CTA;
  className?: string;
  id?: string;
}

const heroTaglines = [
  {
    before: "Building ",
    emphasized: "Future-Ready",
    after: " Websites and Digital Solutions.",
  },
  {
    before: "Get a Website That ",
    emphasized: "Actually Sells",
    after: " for Your Business",
  },
  {
    before: "Build Your ",
    emphasized: "Digital Empire",
    after: " with Griffin's Web Services",
  },
  {
    before: "Leave Your Competition ",
    emphasized: "In the Dust",
    after: " with a Blazing Fast Website",
  },
  {
    before: "Your Business Deserves a ",
    emphasized: "Professional Website",
    after: " That Delivers.",
  },
  {
    before: "Boost Your Business with a ",
    emphasized: "Lightning-Fast",
    after: " Website",
  },
];

const defaultDescription =
  "We craft blazing-fast, mobile-first websites designed to convert and built to last. More than just design, we manage and protect your site long-term. Say no to sluggish, bloated sites that drain revenue and leave you exposed to bad actors.";

const {
  title,
  description,
  primaryCTA = {
    text: "Book An Intro Call",
    link: "#contact",
  },
  className = "",
  id = "hero",
} = Astro.props;

const tagline = title
  ? { before: "", emphasized: title, after: "" }
  : heroTaglines[Math.floor(Math.random() * heroTaglines.length)];

const heroDescription = description ?? defaultDescription;
---

<section
  id={id}
  class={`min-h-screen bg-bg flex items-center justify-center relative overflow-hidden ${className}`}
>
  <div class="absolute inset-0 hero-gradient-bg"></div>

  <div class="relative z-10 min-h-screen inner-section flex">
    <div
      class="min-h-screen xl:h-auto inner-section mx-auto flex flex-col justify-center items-center"
    >
      <div
        class="flex flex-col justify-left items-start lg:justify-center lg:items-center lg:text-center"
      >
        <Heading
          tagName="h1"
          className="text-4xl md:text-5xl lg:text-6xl xl:text-7xl mb-3 leading-tight"
          before={tagline.before}
          text={tagline.emphasized}
          after={tagline.after}
          textClass="emphasized-text"
        />

        <p class="text-text mb-4 lg:mb-6 text-lg max-w-3xl leading-relaxed">
          {heroDescription}
        </p>

        <div class="flex flex-col lg:flex-row items-center gap-6">
          <Button
            client:idle
            href={primaryCTA.link}
            variant="primary"
            size="lg"
          >
            {primaryCTA.text}
          </Button>

          <ContentRenderer
            query={query("testimonials")
              .where((entry) => entry.data.featured === true)
              .limit(3)}
            variant="TestimonialCirclesVariant"
            className="px-2 md:px-0"
            counterEnd={100}
          />
        </div>
      </div>
    </div>
  </div>
</section>
