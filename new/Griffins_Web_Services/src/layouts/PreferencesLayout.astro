---
// src/layouts/PreferencesLayout.astro
/**
 * Preferences Layout
 *
 * Consolidates all user preference systems:
 * - Cookie consent (with script management)
 * - Accessibility preferences
 * - Language translation scripts (Google Translate)
 *
 * All use the same lazy-load, zero-impact pattern.
 */

// Cookie Consent Preferences
import CookiePreferencesButton from "@/components/preferences/consent/CookiePreferencesButton";
import LazyCookieConsentBanner from "@/components/preferences/consent/CookieConsentBanner/Lazy";
import ConsentScript from "@/components/preferences/consent/ConsentScript.astro";

// Accessibility Preferences
import AccessibilityButton from "@/components/preferences/accessibility/AccessibilityButton";
import "../styles/accessibility.css";

import BrowserTranslateScript from "@/components/preferences/language/BrowserTranslateScript.astro";
import "../styles/language-switcher.css";
import DividerHeading from "@/components/DividerHeading/DividerHeading";
---

{/* Consent Script - Inline initialization, runs immediately */}
<ConsentScript />

{/* Browser Translation Script - Both native and Google enabled */}
<BrowserTranslateScript enableNative={true} enableGoogle={true} />

<DividerHeading title="Preferences" className="mb-4" />

<div class="flex flex-col justify-center items-start gap-3">

{/* CCPA Opt-Out Link */}
<a href="/privacy-policy#ccpa-rights" class="text-text hover:underline"
  >Do Not Sell My Personal Information</a
>

{/* Cookie Preferences Button - Client-side only */}
<CookiePreferencesButton client:visible />
<LazyCookieConsentBanner client:visible />

{/* Accessibility Button - Client-side only */}
<AccessibilityButton client:visible />
</div>
