---
// src/components/Form/forms/ContactForm.astro
/**
 * Contact Form - Astro Version
 * Pure HTML with optional React enhancement via client:idle
 */
import Button from "@/components/Button/Button";
import FormWrapper from "@/components/Form/FormWrapper";
import Input from "@/components/Form/inputs/Input";
import Checkbox from "@/components/Form/inputs/Checkbox";
import Textarea from "@/components/Form/inputs/Textarea";

interface Props {
  title?: string;
  description?: string;
  className?: string;
}

const { title, description, className = "" } = Astro.props;

const handleSubmit = async (values: any) => {
  console.log("Contact form submitted:", values);
};
---

<div class={className}>
  {title && <h2 class="text-3xl font-bold mb-3">{title}</h2>}
  {description && <p class="text-text mb-8">{description}</p>}

  <FormWrapper
    client:idle
    onSubmit={handleSubmit}
    successMessage="Thank you for contacting us! We'll get back to you soon."
    errorMessage="There was an error submitting your form. Please try again."
    resetOnSuccess={true}
    className="group section-box card-bg outer-card-transition md:mx-5 lg:mx-10 xl:mx-15 flex flex-col relative overflow-hidden"
  >
    <div class="inner-card-style inner-card-transition inner-card-color" aria-hidden="true"></div>

    <div class="relative z-10 grid gap-4 md:grid-cols-2">
      <Input
        client:idle
        name="firstName"
        label="First Name"
        type="text"
        required={true}
        minLength={2}
        placeholder="Full Name *"
        containerClassName="md:col-span-1"
        showLabel={false}
      />

      <Input
        client:idle
        name="lastName"
        label="Last Name"
        type="text"
        required={true}
        minLength={2}
        placeholder="Last Name *"
        containerClassName="md:col-span-1"
        showLabel={false}
      />

      <Input
        client:idle
        name="email"
        label="Email"
        type="email"
        required={true}
        placeholder="Email Address *"
        containerClassName="md:col-span-1"
        showLabel={false}
      />

      <Input
        client:idle
        name="phone"
        label="Phone Number"
        type="tel"
        required={true}
        pattern="[0-9]{10,}"
        title="Please enter at least 10 digits"
        placeholder="Phone Number *"
        containerClassName="md:col-span-1"
        showLabel={false}
      />

      <Input
        client:idle
        name="company"
        label="Company Name"
        type="text"
        placeholder="Company Name"
        containerClassName="md:col-span-2"
        showLabel={false}
      />

      <Textarea
        client:idle
        name="message"
        label="Your Message"
        required={true}
        minLength={10}
        placeholder="Tell us about your project, goals, and any specific requirements..."
        rows={5}
        containerClassName="md:col-span-2"
        showLabel={false}
      />
    </div>

    <Checkbox
      name="privacy"
      required
      containerClassName="relative z-10 flex items-center gap-2 md:col-span-2 my-4"
      labelClassName="flex items-start gap-2 text-sm text-text"
      checkboxClassName="h-4 w-4 rounded border-muted/60 accent-primary"
    >
      I have read and agree to the{" "}
      <a
        href="/privacy-policy"
        target="_blank"
        rel="noopener noreferrer"
        class="link-base link-md"
      >
        Privacy Policy
      </a>
    </Checkbox>

    <div class="text-center relative z-10 pt-4">
      <Button variant="primary" type="submit" className="w-full md:w-auto">
        Submit Form
      </Button>
    </div>
  </FormWrapper>
</div>
