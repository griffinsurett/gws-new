---
import type { BaseVariantProps } from "../ContentRenderer.types";
import StatCard from "@/components/LoopComponents/StatCard";
import { toArray } from "@/utils/array";

interface Props extends BaseVariantProps {
  columns?: 1 | 2 | 3 | 4;
}

const { items = [], className = "", columns = 4, id } = Astro.props as Props;

const safeItems = toArray(items);

const columnClasses: Record<1 | 2 | 3 | 4, string> = {
  1: "grid grid-cols-1 gap-4",
  2: "grid grid-cols-1 sm:grid-cols-2 gap-4",
  3: "grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5",
  4: "grid grid-cols-2 md:grid-cols-4 gap-4",
};
---

<div id={id} class={`space-y-4 ${className}`.trim()}>
  {safeItems.length > 0 && (
    <ul class={`${columnClasses[columns]} list-none`.trim()}>
      {safeItems.map((item) => (
        <li class="h-full">
          <StatCard client:visible data={item} className="h-full" />
        </li>
      ))}
    </ul>
  )}
</div>
