---
import CircleImageWrapper from './CircleImageWrapper.jsx';
import ImagePart from './ImagePart.astro';
import { getItemKey } from '@/utils/getItemKey.js';
import ImageFallback from '@/assets/background.svg';

const { item, itemClass = '', collectionName, HasPage } = Astro.props;
// determine link vs static
const effectiveHasPage = item.data.hasPage ?? HasPage;
const href = effectiveHasPage
  ? `/${collectionName}/${getItemKey(item)}`
  : null;
const alt = item.data.title || '';
const imgSrc = item.data.featuredImage ?? ImageFallback;
---
<CircleImageWrapper
  client:load
  href={href}
  ariaLabel={href ? `View details for ${alt}` : null}
  itemClass={itemClass}
>
  <ImagePart src={imgSrc} alt={alt} />
</CircleImageWrapper>
